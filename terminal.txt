srun: job 7337629 queued and waiting for resources
srun: job 7337629 has been allocated resources
srun: error: ioctl(TIOCGWINSZ): Inappropriate ioctl for device
srun: error: Not using a pseudo-terminal, disregarding --pty option

Filesystems usage for user croyer ( uid 646291381 ):
[0m-------------------------------------------------------------------------------------
Directory                 Used   Limit   Used,%         Files     Limit
[0m-------------------------------------------------------------------------------------
/home/croyer             977MB[0m[1m    15GB[0m     6.3%[0m         22430[0m[1m    100000[0m
/data/croyer            [1m[33m 200GB[0m[1m   200GB[0m[1m[33m    99.9%[0m        316143[0m[1m          [0m
/scratch/croyer          698GB[0m[1m    20TB[0m     3.4%[0m       1003548[0m[1m          [0m
[0m
/shares/menze.dqbm.uzh    73TB[0m[1m        [0m         [0m       9426020[0m[1m          [0m
[0m-------------------------------------------------------------------------------------

!! Please note: the scratch filesystem is intended only for temporary storage.
   Files in /scratch/croyer that have not been accessed in more than 30 days
   may be automatically deleted.

Tue Dec 12 11:34:45 2023       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.147.05   Driver Version: 525.147.05   CUDA Version: 12.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  Tesla V100-SXM2...  On   | 00000000:16:00.0 Off |                    0 |
| N/A   33C    P0    42W / 300W |      0MiB / 16384MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
[nltk_data] Downloading package stopwords to /home/croyer/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
[nltk_data] Downloading package punkt to /home/croyer/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package wordnet to /home/croyer/nltk_data...
[nltk_data]   Package wordnet is already up-to-date!


Running MultiMedBenchmark with Params(usepytorch=True, seed=42, batch_size=64, run_name='run 2023-12-12 11:34:46.814958')
RadGraph already downloaded
Chexbert already downloaded
***** Benchmarking : MIMIC_CXR report generation *****
Generating reports:   0%|          | 0/61 [00:00<?, ?it/s]Generating reports:   2%|▏         | 1/61 [00:03<03:35,  3.59s/it]Generating reports:   3%|▎         | 2/61 [00:06<03:07,  3.18s/it]Generating reports:   5%|▍         | 3/61 [00:09<03:03,  3.16s/it]Generating reports:   7%|▋         | 4/61 [00:12<03:02,  3.21s/it]Generating reports:   8%|▊         | 5/61 [00:15<02:55,  3.13s/it]Generating reports:  10%|▉         | 6/61 [00:19<02:55,  3.19s/it]Generating reports:  11%|█▏        | 7/61 [00:22<02:52,  3.19s/it]Generating reports:  13%|█▎        | 8/61 [00:25<02:44,  3.10s/it]Generating reports:  15%|█▍        | 9/61 [00:28<02:39,  3.08s/it]Generating reports:  16%|█▋        | 10/61 [00:31<02:35,  3.04s/it]Generating reports:  18%|█▊        | 11/61 [00:34<02:27,  2.96s/it]Generating reports:  20%|█▉        | 12/61 [00:37<02:26,  2.98s/it]Generating reports:  21%|██▏       | 13/61 [00:40<02:22,  2.98s/it]Generating reports:  23%|██▎       | 14/61 [00:43<02:24,  3.07s/it]Generating reports:  25%|██▍       | 15/61 [00:46<02:16,  2.96s/it]Generating reports:  26%|██▌       | 16/61 [00:49<02:15,  3.02s/it]Generating reports:  28%|██▊       | 17/61 [00:52<02:14,  3.06s/it]Generating reports:  30%|██▉       | 18/61 [00:55<02:14,  3.14s/it]Generating reports:  31%|███       | 19/61 [00:58<02:11,  3.14s/it]Generating reports:  33%|███▎      | 20/61 [01:02<02:11,  3.21s/it]Generating reports:  34%|███▍      | 21/61 [01:04<02:03,  3.09s/it]Generating reports:  36%|███▌      | 22/61 [01:08<01:59,  3.07s/it]Generating reports:  38%|███▊      | 23/61 [01:10<01:55,  3.04s/it]Generating reports:  39%|███▉      | 24/61 [01:14<01:53,  3.05s/it]Generating reports:  41%|████      | 25/61 [01:17<01:49,  3.03s/it]Generating reports:  43%|████▎     | 26/61 [01:19<01:43,  2.97s/it]Generating reports:  44%|████▍     | 27/61 [01:22<01:39,  2.92s/it]Generating reports:  46%|████▌     | 28/61 [01:25<01:37,  2.95s/it]Generating reports:  48%|████▊     | 29/61 [01:28<01:34,  2.95s/it]Generating reports:  49%|████▉     | 30/61 [01:31<01:32,  2.97s/it]Generating reports:  51%|█████     | 31/61 [01:34<01:30,  3.00s/it]Generating reports:  52%|█████▏    | 32/61 [01:38<01:30,  3.11s/it]Generating reports:  54%|█████▍    | 33/61 [01:41<01:27,  3.12s/it]Generating reports:  56%|█████▌    | 34/61 [01:44<01:23,  3.08s/it]Generating reports:  57%|█████▋    | 35/61 [01:47<01:19,  3.04s/it]Generating reports:  59%|█████▉    | 36/61 [01:50<01:14,  2.98s/it]Generating reports:  61%|██████    | 37/61 [01:53<01:12,  3.01s/it]Generating reports:  62%|██████▏   | 38/61 [01:55<01:08,  2.97s/it]Generating reports:  64%|██████▍   | 39/61 [01:59<01:07,  3.09s/it]Generating reports:  66%|██████▌   | 40/61 [02:02<01:02,  3.00s/it]Generating reports:  67%|██████▋   | 41/61 [02:05<01:01,  3.08s/it]Generating reports:  69%|██████▉   | 42/61 [02:08<00:57,  3.02s/it]Generating reports:  70%|███████   | 43/61 [02:11<00:55,  3.08s/it]Generating reports:  72%|███████▏  | 44/61 [02:14<00:52,  3.07s/it]Generating reports:  74%|███████▍  | 45/61 [02:17<00:50,  3.13s/it]Generating reports:  75%|███████▌  | 46/61 [02:20<00:46,  3.08s/it]Generating reports:  77%|███████▋  | 47/61 [02:23<00:43,  3.10s/it]Generating reports:  79%|███████▊  | 48/61 [02:27<00:40,  3.13s/it]Generating reports:  80%|████████  | 49/61 [02:29<00:36,  3.05s/it]Generating reports:  82%|████████▏ | 50/61 [02:33<00:34,  3.10s/it]Generating reports:  84%|████████▎ | 51/61 [02:36<00:31,  3.13s/it]Generating reports:  85%|████████▌ | 52/61 [02:39<00:27,  3.08s/it]Generating reports:  87%|████████▋ | 53/61 [02:42<00:24,  3.06s/it]Generating reports:  89%|████████▊ | 54/61 [02:45<00:21,  3.06s/it]Generating reports:  90%|█████████ | 55/61 [02:48<00:18,  3.04s/it]Generating reports:  92%|█████████▏| 56/61 [02:51<00:15,  3.05s/it]Generating reports:  93%|█████████▎| 57/61 [02:54<00:12,  3.02s/it]Generating reports:  95%|█████████▌| 58/61 [02:57<00:09,  3.02s/it]Generating reports:  97%|█████████▋| 59/61 [03:00<00:06,  3.03s/it]Generating reports:  98%|█████████▊| 60/61 [03:03<00:02,  2.97s/it]Generating reports: 100%|██████████| 61/61 [03:04<00:00,  2.30s/it]Generating reports: 100%|██████████| 61/61 [03:04<00:00,  3.02s/it]

Tokenizing report impressions. All reports are cut off at 512 tokens.
  0%|          | 0/3858 [00:00<?, ?it/s]  2%|▏         | 81/3858 [00:00<00:04, 802.76it/s]  4%|▍         | 162/3858 [00:00<00:04, 780.07it/s]  6%|▋         | 242/3858 [00:00<00:04, 783.42it/s]  8%|▊         | 321/3858 [00:00<00:04, 766.68it/s] 10%|█         | 398/3858 [00:00<00:04, 761.45it/s] 12%|█▏        | 475/3858 [00:00<00:04, 761.71it/s] 14%|█▍        | 552/3858 [00:00<00:04, 755.61it/s] 16%|█▋        | 628/3858 [00:00<00:04, 750.17it/s] 19%|█▊        | 716/3858 [00:00<00:03, 789.65it/s] 21%|██        | 797/3858 [00:01<00:03, 794.57it/s] 23%|██▎       | 877/3858 [00:01<00:03, 795.07it/s] 25%|██▍       | 957/3858 [00:01<00:03, 780.92it/s] 27%|██▋       | 1036/3858 [00:01<00:03, 748.93it/s] 29%|██▉       | 1122/3858 [00:01<00:03, 780.02it/s] 31%|███▏      | 1207/3858 [00:01<00:03, 796.48it/s] 33%|███▎      | 1287/3858 [00:01<00:03, 794.51it/s] 36%|███▌      | 1374/3858 [00:01<00:03, 813.57it/s] 38%|███▊      | 1465/3858 [00:01<00:02, 840.86it/s] 40%|████      | 1550/3858 [00:01<00:02, 789.44it/s] 42%|████▏     | 1631/3858 [00:02<00:02, 795.02it/s] 45%|████▍     | 1717/3858 [00:02<00:02, 810.01it/s] 47%|████▋     | 1799/3858 [00:02<00:02, 774.15it/s] 49%|████▉     | 1881/3858 [00:02<00:02, 784.15it/s] 51%|█████     | 1971/3858 [00:02<00:02, 814.35it/s] 53%|█████▎    | 2053/3858 [00:02<00:02, 797.29it/s] 55%|█████▌    | 2134/3858 [00:02<00:02, 794.81it/s] 57%|█████▋    | 2217/3858 [00:02<00:02, 804.52it/s] 60%|█████▉    | 2298/3858 [00:02<00:01, 801.20it/s] 62%|██████▏   | 2379/3858 [00:03<00:01, 768.05it/s] 64%|██████▍   | 2465/3858 [00:03<00:01, 791.82it/s] 66%|██████▌   | 2545/3858 [00:03<00:01, 786.47it/s] 68%|██████▊   | 2624/3858 [00:03<00:01, 777.63it/s] 70%|███████   | 2709/3858 [00:03<00:01, 796.32it/s] 72%|███████▏  | 2793/3858 [00:03<00:01, 807.95it/s] 74%|███████▍  | 2874/3858 [00:03<00:01, 806.09it/s] 77%|███████▋  | 2955/3858 [00:03<00:01, 763.17it/s] 79%|███████▊  | 3032/3858 [00:03<00:01, 741.27it/s] 81%|████████  | 3119/3858 [00:03<00:00, 775.24it/s] 83%|████████▎ | 3197/3858 [00:04<00:00, 776.37it/s] 85%|████████▌ | 3282/3858 [00:04<00:00, 797.08it/s] 87%|████████▋ | 3362/3858 [00:04<00:00, 795.65it/s] 89%|████████▉ | 3442/3858 [00:04<00:00, 783.32it/s] 91%|█████████▏| 3521/3858 [00:04<00:00, 779.87it/s] 94%|█████████▎| 3612/3858 [00:04<00:00, 817.56it/s] 96%|█████████▌| 3697/3858 [00:04<00:00, 824.35it/s] 98%|█████████▊| 3780/3858 [00:04<00:00, 807.29it/s]100%|██████████| 3858/3858 [00:04<00:00, 790.03it/s]
Using 1 GPUs!

Begin report impression labeling. The progress bar counts the # of batches completed:
The batch size is 18
  0%|          | 0/215 [00:00<?, ?it/s]  1%|          | 2/215 [00:00<00:13, 16.09it/s]  2%|▏         | 5/215 [00:00<00:10, 19.11it/s]  4%|▎         | 8/215 [00:00<00:09, 20.99it/s]  5%|▌         | 11/215 [00:00<00:09, 21.19it/s]  7%|▋         | 14/215 [00:00<00:09, 21.73it/s]  8%|▊         | 17/215 [00:00<00:09, 21.41it/s]  9%|▉         | 20/215 [00:00<00:09, 21.51it/s] 11%|█         | 23/215 [00:01<00:09, 21.00it/s] 12%|█▏        | 26/215 [00:01<00:09, 20.27it/s] 13%|█▎        | 29/215 [00:01<00:09, 20.54it/s] 15%|█▍        | 32/215 [00:01<00:08, 20.40it/s] 16%|█▋        | 35/215 [00:01<00:08, 20.57it/s] 18%|█▊        | 38/215 [00:01<00:08, 21.39it/s] 19%|█▉        | 41/215 [00:01<00:07, 22.01it/s] 20%|██        | 44/215 [00:02<00:07, 22.89it/s] 22%|██▏       | 47/215 [00:02<00:07, 22.17it/s] 23%|██▎       | 50/215 [00:02<00:07, 22.65it/s] 25%|██▍       | 53/215 [00:02<00:07, 21.60it/s] 26%|██▌       | 56/215 [00:02<00:07, 20.83it/s] 27%|██▋       | 59/215 [00:02<00:07, 21.46it/s] 29%|██▉       | 62/215 [00:02<00:06, 22.27it/s] 30%|███       | 65/215 [00:03<00:06, 22.39it/s] 32%|███▏      | 68/215 [00:03<00:06, 21.48it/s] 33%|███▎      | 71/215 [00:03<00:06, 21.03it/s] 34%|███▍      | 74/215 [00:03<00:06, 20.95it/s] 36%|███▌      | 77/215 [00:03<00:06, 22.06it/s] 37%|███▋      | 80/215 [00:03<00:06, 22.37it/s] 39%|███▊      | 83/215 [00:03<00:05, 22.58it/s] 40%|████      | 86/215 [00:04<00:06, 21.38it/s] 41%|████▏     | 89/215 [00:04<00:05, 21.45it/s] 43%|████▎     | 92/215 [00:04<00:05, 21.22it/s] 44%|████▍     | 95/215 [00:04<00:05, 22.25it/s] 46%|████▌     | 98/215 [00:04<00:05, 21.12it/s] 47%|████▋     | 101/215 [00:04<00:05, 20.31it/s] 48%|████▊     | 104/215 [00:04<00:05, 20.75it/s] 50%|████▉     | 107/215 [00:04<00:04, 22.10it/s] 51%|█████     | 110/215 [00:05<00:04, 21.84it/s] 53%|█████▎    | 113/215 [00:05<00:05, 20.18it/s] 54%|█████▍    | 116/215 [00:05<00:04, 20.76it/s] 55%|█████▌    | 119/215 [00:05<00:04, 21.44it/s] 57%|█████▋    | 122/215 [00:05<00:04, 20.82it/s] 58%|█████▊    | 125/215 [00:05<00:04, 21.02it/s] 60%|█████▉    | 128/215 [00:06<00:04, 20.75it/s] 61%|██████    | 131/215 [00:06<00:04, 19.55it/s] 62%|██████▏   | 133/215 [00:06<00:04, 18.68it/s] 63%|██████▎   | 136/215 [00:06<00:03, 20.95it/s] 65%|██████▍   | 139/215 [00:06<00:03, 21.45it/s] 66%|██████▌   | 142/215 [00:06<00:03, 21.06it/s] 67%|██████▋   | 145/215 [00:06<00:03, 19.16it/s] 69%|██████▉   | 148/215 [00:07<00:03, 19.93it/s] 70%|███████   | 151/215 [00:07<00:03, 18.33it/s] 71%|███████   | 153/215 [00:07<00:03, 18.65it/s] 73%|███████▎  | 156/215 [00:07<00:02, 20.01it/s] 74%|███████▍  | 159/215 [00:07<00:02, 19.63it/s] 75%|███████▌  | 162/215 [00:07<00:03, 15.97it/s] 76%|███████▋  | 164/215 [00:08<00:03, 13.56it/s] 77%|███████▋  | 166/215 [00:08<00:03, 14.36it/s] 78%|███████▊  | 168/215 [00:08<00:03, 14.32it/s] 80%|███████▉  | 171/215 [00:08<00:02, 16.42it/s] 81%|████████  | 174/215 [00:08<00:02, 17.65it/s] 82%|████████▏ | 177/215 [00:08<00:02, 18.94it/s] 83%|████████▎ | 179/215 [00:08<00:01, 19.09it/s] 84%|████████▍ | 181/215 [00:08<00:01, 19.14it/s] 86%|████████▌ | 184/215 [00:09<00:01, 20.83it/s] 87%|████████▋ | 187/215 [00:09<00:01, 19.40it/s] 88%|████████▊ | 190/215 [00:09<00:01, 18.10it/s] 89%|████████▉ | 192/215 [00:09<00:01, 16.78it/s] 90%|█████████ | 194/215 [00:09<00:01, 17.31it/s] 91%|█████████ | 196/215 [00:09<00:01, 15.65it/s] 93%|█████████▎| 199/215 [00:10<00:00, 17.54it/s] 94%|█████████▍| 202/215 [00:10<00:00, 20.16it/s] 95%|█████████▌| 205/215 [00:10<00:00, 20.37it/s] 97%|█████████▋| 208/215 [00:10<00:00, 19.55it/s] 98%|█████████▊| 211/215 [00:10<00:00, 20.53it/s]100%|█████████▉| 214/215 [00:10<00:00, 18.93it/s]100%|██████████| 215/215 [00:10<00:00, 20.00it/s]

Tokenizing report impressions. All reports are cut off at 512 tokens.
  0%|          | 0/3858 [00:00<?, ?it/s] 17%|█▋        | 657/3858 [00:00<00:00, 6563.47it/s] 35%|███▍      | 1350/3858 [00:00<00:00, 6778.09it/s] 53%|█████▎    | 2038/3858 [00:00<00:00, 6822.44it/s] 71%|███████   | 2726/3858 [00:00<00:00, 6844.10it/s] 88%|████████▊ | 3411/3858 [00:00<00:00, 6840.17it/s]100%|██████████| 3858/3858 [00:00<00:00, 6826.13it/s]
Using 1 GPUs!

Begin report impression labeling. The progress bar counts the # of batches completed:
The batch size is 18
  0%|          | 0/215 [00:00<?, ?it/s]  5%|▌         | 11/215 [00:00<00:01, 108.24it/s] 10%|█         | 22/215 [00:00<00:01, 109.16it/s] 15%|█▌        | 33/215 [00:00<00:01, 109.33it/s] 20%|██        | 44/215 [00:00<00:01, 109.39it/s] 26%|██▌       | 55/215 [00:00<00:01, 109.54it/s] 31%|███       | 66/215 [00:00<00:01, 108.74it/s] 36%|███▋      | 78/215 [00:00<00:01, 109.86it/s] 42%|████▏     | 90/215 [00:00<00:01, 110.50it/s] 47%|████▋     | 102/215 [00:00<00:01, 111.04it/s] 53%|█████▎    | 114/215 [00:01<00:00, 111.38it/s] 59%|█████▊    | 126/215 [00:01<00:00, 111.60it/s] 64%|██████▍   | 138/215 [00:01<00:00, 111.72it/s] 70%|██████▉   | 150/215 [00:01<00:00, 111.86it/s] 75%|███████▌  | 162/215 [00:01<00:00, 111.95it/s] 81%|████████  | 174/215 [00:01<00:00, 111.65it/s] 87%|████████▋ | 186/215 [00:01<00:00, 111.85it/s] 92%|█████████▏| 198/215 [00:01<00:00, 112.06it/s] 98%|█████████▊| 210/215 [00:01<00:00, 112.07it/s]100%|██████████| 215/215 [00:01<00:00, 111.10it/s]
/shares/menze.dqbm.uzh/corentin/RadGraph/scorers/RadGraph/allennlp/nn/util.py:1467: UserWarning: The torch.cuda.*DtypeTensor constructors are no longer recommended. It's best to use methods such as torch.tensor(data, dtype=*, device='cuda') to create tensors. (Triggered internally at ../torch/csrc/tensor/python_tensor.cpp:83.)
  return torch.cuda.LongTensor(size, device=device).fill_(1).cumsum(0) - 1
/shares/menze.dqbm.uzh/corentin/RadGraph/scorers/RadGraph/dygie/data/dataset_readers/dygie.py:192: UserWarning: Document 1 has a sentence with a single token or no tokens. This may break the modeling code.
  warnings.warn(msg)
{'type': 'json', 'name': 'metrics_MIMIC_CXR report generation', 'value': {'bleu1': 2.7787174985860474e-05, 'bleu4': 0.0, 'rougeL': {'rougeL_fmeasure': tensor(0.0410), 'rougeL_precision': tensor(0.2144), 'rougeL_recall': tensor(0.0230)}, 'f1-radgraph': 0.0, 'CheXBert vector similarity': 0.1327478289604187, 'f1-bertscore': -5.550156593322754, 'radcliq': 21.971292214270886, 'meteor': 0.0183772380853781}}
